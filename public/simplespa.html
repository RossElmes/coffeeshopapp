<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coffee Shop Order App</title>
  <style>
    /* Add any additional CSS styles here */
  </style>
</head>
<body>

<!-- Order Form -->
<div>
  <form id="customerForm">
    <label for="email">Email:</label>
    <input type="email" id="email" required><br>

    <label for="name">Name:</label>
    <input type="text" id="name" required><br>

    <label for="phone">Phone:</label>
    <input type="tel" id="phone" required><br>

    <label for="orderTime">Order Time:</label>
    <input type="text" id="orderTime" placeholder="HH:MM AM/PM" required><br>
    <br>
    <br>
  </form>
</div>
<div id="'product-selector">
    <label for="product">Product:</label>
    <select id="product">
        <option value="Latte">Latte</option>
        <option value="Flat White">Flat White</option>
        <option value="Americano">Americano</option>
        <option value="Cappacino">Cappacino</option>
        <option value="Cortado">Cortado</option>
      </select>
  
      <label for="milk">Milk:</label>
      <select id="milk">
        <option value="OAT">OAT</option>
        <option value="DAIRY">DAIRY</option>
        <option value="COCONUT">COCONUT</option>
      </select>
  
      <label for="size">Size:</label>
      <select id="size">
        <option value="Small">Small</option>
        <option value="Medium">Medium</option>
        <option value="Large">Large</option>
      </select>
  
      <button type="button" onclick="addToOrder()">Add to Order</button>
</div>

<!-- Order Items -->
<div>
  <h2>Your Order</h2>
  <ul id="orderItems"></ul>
  <button type="button" onclick="confirmOrder()">Confirm Order</button>
</div>

<!-- Confirmation Message -->
<div id="confirmModal">
  <h2>Order Confirmation</h2>
  <ul id="orderItems"></ul>
  <p id="confirmationDetails"></p>
  <p>Your order number is <span id="orderNumber"></span>.</p>
</div>

<script>
  let order = [];

  function addToOrder() {

    const email = document.getElementById('email').value;
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const orderTime = document.getElementById('orderTime').value;

    // Get selected Milk option
    const milk = document.getElementById('milk').value;

    // Get selected Size
    const size = document.getElementById('size').value;

    // Get selected Product
    const product = document.getElementById('product').value;
    // Validate and store customer details
    // You can perform additional validation as needed
    // For simplicity, assuming all fields are required

    // Create the order item
    const orderItem = { product: `Product: ${product}`
    , attributes: `Milk: ${milk}, Size: ${size}` 
    , email:email
    , name:name
    , phone:phone
    , orderTime:orderTime};

    // Add the order item to the order
    order.push(orderItem);

    // Display the order items
    updateOrderItems();

    // Reset the form for adding another item
    //document.getElementById('customerForm').reset();
    console.log(order)
  }

  function updateOrderItems() {
    const orderItemsElement = document.getElementById('orderItems');
    orderItemsElement.innerHTML = '';

    order.forEach((item, index) => {
      const listItem = document.createElement('li');
      const deleteButton = document.createElement("button");
      deleteButton.textContent = "Delete";
      listItem.textContent = `${item.product} - ${item.attributes}`;

      deleteButton.addEventListener("click", () => {
          listItem.remove();
          console.log(index);
          order.splice(index,1);
          console.log(order);
          listItem.remove();
          
        });

      listItem.append(deleteButton)
      orderItemsElement.appendChild(listItem);
    });
  }


  var products = [
      {
        name: 'Latte',
        attributes: {
          Size: ['Small', 'Medium', 'Large'],
          Milk: ['Regular', 'Skim', 'Soy']
        }
      },
      // ... more products with different attributes
    ];

    function confirmOrder() {
        const confirmationDetails = document.getElementById('confirmationDetails');
        confirmationDetails.innerHTML = '';
        const orderNumber = Math.floor(Math.random() * 1000000) + 1;

        //confirmationDetails.textContent = 'Your order details:';
        order.forEach((item,index) => {
            const listItem = document.createElement('li');
            listItem.textContent = `${item.product} - ${item.attributes}`;
            confirmationDetails.appendChild(listItem);
        });



    // reset the form when order is made
    document.getElementById('customerForm').reset();
    
    document.getElementById('orderNumber').textContent = orderNumber;

  }

</script>

</body>
</html>
